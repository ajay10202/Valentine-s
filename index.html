<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Be My Valentine? üåπ</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Sacramento&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            height: 100vh; width: 100%;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Poppins', sans-serif;
            overflow: hidden; 
            background-color: #ff9a9e;
            touch-action: none; user-select: none;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="%23ff0055"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'), auto;
        }

        /* --- CARD CONTAINER --- */
        .container {
            text-align: center; background: rgba(255, 255, 255, 0.90);
            padding: 2rem; border-radius: 30px;
            z-index: 10; width: 90%; max-width: 400px; 
            margin: 0 auto; backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.8); 
            position: relative;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.3);
            animation: breathingGlow 3s infinite alternate;
        }

        @keyframes breathingGlow {
            0% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 77, 109, 0.3); border-color: rgba(255, 255, 255, 0.8); }
            100% { transform: scale(1.02); box-shadow: 0 0 40px rgba(255, 0, 85, 0.5); border-color: #ffb3c1; }
        }

        /* --- ANIMATIONS --- */
        .smoke-puff {
            position: fixed; width: 50px; height: 50px;
            background: radial-gradient(circle, rgba(200,200,200,0.8) 0%, rgba(200,200,200,0) 70%);
            border-radius: 50%;
            animation: puff 0.5s ease-out forwards;
            z-index: 9998; pointer-events: none;
        }
        @keyframes puff { 0% { transform: scale(0.5); opacity: 0.8; } 100% { transform: scale(2); opacity: 0; } }

        .stream-heart {
            position: fixed; bottom: -50px; right: 20px; font-size: 2rem;
            z-index: 50; animation: floatStream 4s linear forwards; opacity: 0;
        }
        @keyframes floatStream {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-80vh) scale(1.5) translateX(-20px); opacity: 0; }
        }

        .cursor-item {
            position: absolute; pointer-events: none; font-size: 24px; z-index: 9999;
            animation: floatUp 1.5s ease-out forwards; text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.2) rotate(45deg); opacity: 0; }
        }

        .petal, .floating-photo { position: absolute; z-index: -1; top: -10vh; }
        .petal { background-color: #ff4d6d; border-radius: 100% 0 100% 0; }
        .floating-photo { border: 3px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        @keyframes fall-straight { to { transform: translateY(120vh) rotate(720deg); } }
        @keyframes fall-sway-left {
            0% { transform: translateY(-10vh) translateX(0); }
            50% { transform: translateY(50vh) translateX(-50px); }
            100% { transform: translateY(120vh) translateX(0); }
        }
        @keyframes fall-sway-right {
            0% { transform: translateY(-10vh) translateX(0); }
            50% { transform: translateY(50vh) translateX(50px); }
            100% { transform: translateY(120vh) translateX(0); }
        }

        /* --- UI ELEMENTS --- */
        .gif-container img { width: 100%; max-width: 200px; border-radius: 20px; }
        h1 { font-family: 'Great Vibes', cursive; color: #d63353; font-size: 2.8rem; margin: 10px 0; line-height: 1.1; }
        h2 { font-family: 'Great Vibes', cursive; color: #ff0055; font-size: 2.5rem; margin: 10px 0; }
        p { font-family: 'Sacramento', cursive; color: #c0392b; font-size: 1.5rem; font-weight: 600; }

        .btn-group {
            display: flex; justify-content: center; align-items: center; 
            gap: 15px; margin-top: 25px; height: 70px; position: relative; width: 100%;
        }
        button {
            padding: 12px 25px; font-size: 1.1rem; border: none; border-radius: 50px;
            cursor: pointer; font-family: 'Poppins', sans-serif; font-weight: 600;
            transition: all 0.2s ease; white-space: nowrap; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); -webkit-tap-highlight-color: transparent;
        }
        #yesBtn {
            background: linear-gradient(45deg, #ff4d6d, #ff0055);
            color: white; z-index: 100;
            animation: heartbeat 1.5s infinite;
        }
        #noBtn {
            background-color: #fff; color: #888; border: 1px solid #ddd;
            position: relative; z-index: 9999;
        }

        .float-text {
            position: absolute; pointer-events: none;
            color: #ff0055; font-weight: bold; font-size: 1.5rem;
            animation: floatUpFade 1s ease-out forwards;
            z-index: 10000; text-shadow: 0 2px 5px rgba(255,255,255,0.8);
        }
        @keyframes floatUpFade { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-50px); opacity: 0; } }

        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        #startOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 99999;
            display: flex; justify-content: center; align-items: center;
            color: white; cursor: pointer; transition: opacity 0.5s ease;
        }
        .start-content { text-align: center; animation: pulse 2s infinite; }

        #confettiCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
        .bg-gradient {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffdde1, #fcb69f);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite; z-index: -2;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .heart-burst {
            position: absolute; color: #ff0055; font-size: 20px; pointer-events: none;
            animation: burst 1s ease-out forwards; z-index: 9999;
        }
        @keyframes burst {
            0% { transform: scale(0) translate(0, 0); opacity: 1; }
            100% { transform: scale(1.5) translate(var(--tx), var(--ty)); opacity: 0; }
        }

        .date-picker-container { margin-top: 20px; }
        input[type="date"] {
            padding: 10px; border-radius: 10px; border: 2px solid #ff4d6d;
            font-family: 'Poppins', sans-serif; color: #d63353; background: #fff0f3; width: 80%;
        }
        .whatsapp-btn {
            display: inline-block; background-color: #25D366; color: white;
            padding: 12px 25px; border-radius: 50px; text-decoration: none;
            font-weight: bold; margin-top: 15px; font-size: 1rem;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); animation: pulse 2s infinite;
        }

        .meter-container { 
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%); 
            width: 85%; max-width: 400px; z-index: 1000; text-align: center; 
        }
        .meter-label { color: white; font-weight: bold; text-shadow: 0 2px 2px rgba(0,0,0,0.3); }
        .meter-bar-bg { width: 100%; height: 12px; background: rgba(255, 255, 255, 0.5); border-radius: 20px; overflow: hidden; margin-top: 5px; }
        .meter-bar-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #ff9a9e, #ff0055); transition: width 0.3s ease; }

        @keyframes heartbeat { 0% { transform: scale(1); } 15% { transform: scale(1.05); } 30% { transform: scale(1); } 45% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes pulse { 0% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.8; transform: scale(1); } }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="startOverlay">
        <div class="start-content">
            <h1>Tap to Start ‚ù§Ô∏è</h1>
            <p>(Turn up your volume! üîä)</p>
        </div>
    </div>

    <audio id="noSound" preload="auto">
        <source src="no.mp3" type="audio/mp3">
    </audio>
    <audio id="yesSound" loop preload="auto">
        <source src="yes.mp3" type="audio/mp3">
    </audio>

    <div class="bg-gradient"></div>
    <div id="petalsContainer"></div>
    <canvas id="confettiCanvas"></canvas>

    <div class="meter-container">
        <div class="meter-label">Love Meter ‚ù§Ô∏è</div>
        <div class="meter-bar-bg">
            <div id="loveMeterBar" class="meter-bar-fill"></div>
        </div>
    </div>
    
    <div class="container" id="mainContainer">
        
        <div id="questionSection">
            <div class="gif-container">
                <img id="mainGif" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYzhjOTZlNjUzZmYxZDRiNzM5MGNmODk4MzRjZWMzYWM2M2U5YzYwZCZlcD12MV9pbnRlcm5hbF9naWZzX2dpZklkJmN0PXM/JTj1b7i2V218n1gU9N/giphy.gif" alt="Cute bear">
            </div>
            
            <h1 id="typewriterText"></h1>
            <p>Don't break my heart... ü•∫</p>
            
            <div class="btn-group">
                <button id="yesBtn">Yes! üíñ</button>
                <button id="noBtn">No üíî</button>
            </div>
        </div>

        <div id="successSection" class="hidden">
            <div class="gif-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM2Q0YjJmYjY2YjI5ZjJmYjI5ZjJmYjI5ZjJmYjI5ZjJmYiZlcD12MV9pbnRlcm5hbF9naWZzX2dpZklkJmN0PWc/MDJ9IbxxvDUQM/giphy.gif" alt="Celebration">
            </div>
            <h2>I Love You! ü©µüíõ</h2>
            <p class="romantic-msg">You are my today and all of my tomorrows. üåπ</p>
            
            <div class="date-picker-container">
                <p>When are we going out? üìÖ</p>
                <input type="date" id="dateInput">
            </div>

            <a id="whatsappBtn" href="#" target="_blank" class="whatsapp-btn">
                Send me the Date! üíå
            </a>
        </div>

    </div>

    <script>
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionSection = document.getElementById('questionSection');
        const successSection = document.getElementById('successSection');
        const loveMeterBar = document.getElementById('loveMeterBar');
        const noSound = document.getElementById('noSound');
        const yesSound = document.getElementById('yesSound');
        const startOverlay = document.getElementById('startOverlay');
        const petalsContainer = document.getElementById('petalsContainer');
        const typewriterElement = document.getElementById('typewriterText');
        const dateInput = document.getElementById('dateInput');
        const whatsappBtn = document.getElementById('whatsappBtn');

        // CONFIG
        const myPhoneNumber = "916380052805"; 

        let isAudioUnlocked = false;
        let yesClickCount = 0; 
        let loveScore = 0; 
        const yesTexts = ["Yes! üíñ", "Really? üòç", "Sure? üåπ", "YESSS! üíç"];

        // 1. START & AUDIO UNLOCK
        startOverlay.addEventListener('click', () => {
            noSound.play().catch(e => {});
            noSound.pause();
            yesSound.play().catch(e => {});
            yesSound.pause();
            
            startOverlay.style.opacity = '0';
            setTimeout(() => {
                startOverlay.style.display = 'none';
                isAudioUnlocked = true;
                typeWriter();
                setInterval(createPetalOrPhoto, 300);
                setInterval(createLivestreamHeart, 600);
            }, 500);
        });

        // 2. DYNAMIC CURSOR TRAIL
        document.addEventListener('mousemove', (e) => {
            createCursorTrail(e.clientX, e.clientY);
        });
        document.addEventListener('touchmove', (e) => {
            createCursorTrail(e.touches[0].clientX, e.touches[0].clientY);
        });

        function createCursorTrail(x, y) {
            const item = document.createElement('div');
            item.classList.add('cursor-item');
            const emojis = ['‚ù§Ô∏è', '‚ú®', 'üíñ', 'üåπ', 'ü¶ã', 'üíã'];
            item.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
            const offsetX = (Math.random() - 0.5) * 20;
            const offsetY = (Math.random() - 0.5) * 20;
            item.style.left = (x + offsetX) + 'px';
            item.style.top = (y + offsetY) + 'px';
            document.body.appendChild(item);
            setTimeout(() => item.remove(), 1500);
        }

        // 3. LIVESTREAM HEARTS
        function createLivestreamHeart() {
            const heart = document.createElement('div');
            heart.classList.add('stream-heart');
            const emojis = ['‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'üíñ'];
            heart.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
            heart.style.right = (20 + Math.random() * 50) + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 4000);
        }

        // 4. YES BUTTON GAME LOGIC
        yesBtn.addEventListener('click', (e) => {
            yesClickCount++;
            const floatText = document.createElement('div');
            floatText.classList.add('float-text');
            floatText.innerText = "+25% Love! üíò";
            const rect = yesBtn.getBoundingClientRect();
            floatText.style.left = rect.left + 'px';
            floatText.style.top = rect.top + 'px';
            document.body.appendChild(floatText);
            setTimeout(() => floatText.remove(), 1000);

            loveScore += 25;
            loveMeterBar.style.width = Math.min(loveScore, 100) + "%";

            if (yesClickCount < 4) {
                yesBtn.innerText = yesTexts[yesClickCount];
                createHeartBurst(e.clientX, e.clientY);
            } 
            else {
                if(isAudioUnlocked) {
                    noSound.pause();
                    yesSound.volume = 0.8;
                    yesSound.play();
                }
                document.body.classList.add('shake');
                setTimeout(() => {
                    document.body.classList.remove('shake');
                    questionSection.classList.add('hidden');
                    successSection.classList.remove('hidden');
                    startConfetti(); 
                    startRomanticRain();
                }, 500);
            }
        });

        // 5. NO BUTTON LOGIC (FULL SCREEN TELEPORT)
        function moveNoButton() {
            if (isAudioUnlocked) {
                noSound.currentTime = 0; noSound.volume = 0.3; noSound.play(); 
            }

            // Smoke Puff
            const rect = noBtn.getBoundingClientRect();
            const puff = document.createElement('div');
            puff.classList.add('smoke-puff');
            puff.style.left = rect.left + 'px';
            puff.style.top = rect.top + 'px';
            document.body.appendChild(puff);
            setTimeout(() => puff.remove(), 500);

            // Full Screen Math
            const maxX = window.innerWidth - noBtn.offsetWidth - 20; 
            const maxY = window.innerHeight - noBtn.offsetHeight - 20;

            const randomX = Math.random() * maxX;
            const randomY = Math.random() * maxY;

            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            
            const taunts = ["Oops! üí®", "Too slow! üòú", "Missed me! üëª", "Nope! üõë", "Try harder! üí™"];
            noBtn.innerText = taunts[Math.floor(Math.random() * taunts.length)];
        }

        noBtn.addEventListener('mouseover', moveNoButton);
        noBtn.addEventListener('click', moveNoButton);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNoButton(); });


        // 6. UTILS & ANIMATIONS
        function createPetalOrPhoto() {
            const isPhoto = Math.random() < 0.2; 
            const element = document.createElement('div');
            if (isPhoto) {
                element.classList.add('floating-photo');
                const photos = [
                    "https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif",
                    "https://media.giphy.com/media/l0HlO3BJ8LALPW4sE/giphy.gif"
                ]; 
                const img = document.createElement('img');
                img.src = photos[Math.floor(Math.random() * photos.length)];
                img.style.width = '100%';
                element.appendChild(img);
            } else {
                element.classList.add('petal');
                element.style.backgroundColor = ['#ff4d6d', '#ff0055', '#ff9a9e', '#ffd166'][Math.floor(Math.random()*4)];
            }
            const size = Math.random() * 20 + 10; 
            element.style.width = isPhoto ? '50px' : `${size}px`;
            element.style.height = isPhoto ? 'auto' : `${size}px`;
            
            if (size < 15 && !isPhoto) {
                element.style.filter = "blur(2px)";
                element.style.opacity = "0.6";
                element.style.zIndex = "-5";
            } else {
                element.style.filter = "blur(0px)";
                element.style.opacity = "0.9";
                element.style.zIndex = "-1";
            }

            const duration = Math.random() * 5 + 5; 
            const animations = ['fall-straight', 'fall-sway-left', 'fall-sway-right'];
            const randomAnim = animations[Math.floor(Math.random() * animations.length)];
            element.style.animation = `${randomAnim} ${duration}s linear forwards`;
            element.style.left = Math.random() * 100 + "vw";
            petalsContainer.appendChild(element);
            setTimeout(() => element.remove(), duration * 1000);
        }

        whatsappBtn.addEventListener('click', (e) => {
            e.preventDefault(); 
            const date = dateInput.value;
            if (date) {
                const url = `https://wa.me/${myPhoneNumber}?text=I%20said%20YES!%20%F0%9F%92%96%20See%20you%20on%20${date}!%20%F0%9F%93%85`;
                window.open(url, '_blank');
            } else {
                alert("Please pick a date first! üìÖ");
            }
        });

        function createHeartBurst(x, y) {
            for(let i=0; i<8; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-burst');
                heart.innerHTML = 'üíñ';
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                heart.style.setProperty('--tx', (Math.random() * 100 - 50) + 'px');
                heart.style.setProperty('--ty', (Math.random() * 100 - 50) + 'px');
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1000);
            }
        }
        function startRomanticRain() {
            setInterval(() => {
                const item = document.createElement('div');
                item.innerHTML = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üåπ';
                item.style.position = 'fixed';
                item.style.fontSize = '2rem';
                item.style.left = Math.random() * 100 + "vw";
                item.style.top = '-50px';
                item.style.animation = 'fall 3s linear forwards';
                document.body.appendChild(item);
                setTimeout(() => item.remove(), 3000);
            }, 200);
        }
        const text = "Will you be my Valentine?";
        let index = 0;
        function typeWriter() {
            if (index < text.length) {
                typewriterElement.innerHTML += text.charAt(index);
                index++;
                setTimeout(typeWriter, 100);
            }
        }
        function startConfetti() {
            const canvas = document.getElementById('confettiCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            const colors = ['#ff0055', '#ff9a9e', '#ffd166', '#06d6a0', '#118ab2'];
            for(let i=0; i<200; i++) {
                particles.push({
                    x: canvas.width / 2, y: canvas.height / 2,
                    vx: (Math.random() - 0.5) * 20, vy: (Math.random() - 0.5) * 20,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 2
                });
            }
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, index) => {
                    p.x += p.vx; p.y += p.vy; p.vy += 0.2; p.size *= 0.96; 
                    ctx.fillStyle = p.color; ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
                    if(p.size < 0.5) particles.splice(index, 1);
                });
                if(particles.length > 0) requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>
